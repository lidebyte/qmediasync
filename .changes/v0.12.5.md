
## v0.12.5 - 2026-01-25

### 修复

- 修复电视剧二级分类计算错误的问题（上次改过，改错地方了），问题：国家和流派都有精确匹配项，没有优先按照流派取导致走到了默认值。

### 优化

- 尝试优化115列出目录的速度（主要影响STRM同步目录添加和刮削目录添加时选择目录框的显示速度）。目前收效甚微：115接口有时会10-30秒才响应。增加了115接口的DEBUG日志输出，可以帮助分析问题所在。

```log
2026/01/25 15:14:25.940741 [DEBUG] 开始执行认证请求: GET https://proapi.115.com/open/ufile/files
2026/01/25 15:14:25.940741 [DEBUG] 执行认证请求: GET https://proapi.115.com/open/ufile/files
2026/01/25 15:14:26.325239 [DEBUG] 完成认证请求: GET https://proapi.115.com/open/ufile/files
```

上面三条日志是115请求时记录的，可以看到从开始请求到完成请求大约耗时400毫秒（有时会用时30s+）左右，说明问题不在客户端，而是在115服务器端响应过慢。

- 将115下载元数据的超时时间改为5分钟，防止部分大文件元数据或者网络不好时下载超时失败。
- 重构了STRM同步和刮削任务队列，解决部分设备会出现多个任务同时执行的问题，保证同一时间只有一个任务在执行，避免出现115接口调用超限。
- 重构了数据备份恢复，实装了定时备份功能。

### 新增

- 给所有接口增加swagger注释（部分完成），待全部完成后会放出接口文档供开发者配合Api Key使用。
- Emby Webhook接口增加是否启用校验的选项，如果要对公网开放需要启用鉴权（系统设置-Emby），然后在url中添加api_key来保证安全性。
- 增加了123云盘的客户端（暂未启用），后续会考虑增加对123云盘的支持。
