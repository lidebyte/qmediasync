basePath: /
host: localhost:8115
info:
  contact: {}
  description: 媒体同步和刮削系统API
  title: QMediaSync API
  version: "1.0"
paths:
  /115/newurl:
    get:
      consumes:
      - application/json
      description: 根据pickcode查询115文件直链并按需302跳转
      parameters:
      - description: 文件PickCode
        in: query
        name: pickcode
        required: true
        type: string
      - description: 115用户ID
        in: query
        name: userid
        type: string
      - description: 是否强制直链播放，1为直链，0使用本地代理时会走代理
        in: query
        name: force
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
        "302":
          description: 重定向到文件直链
          schema:
            type: string
      summary: 获取115文件直链
      tags:
      - 115开放平台
  /account/create:
    post:
      consumes:
      - application/json
      description: 创建新的开放平台账号（支持115、OpenList等）
      parameters:
      - description: 账号源类型
        in: query
        name: source_type
        required: true
        type: string
      - description: 账号名称
        in: query
        name: name
        required: true
        type: string
      - description: 应用ID（自定义时必需）
        in: query
        name: app_id
        type: string
      - description: 应用ID名称（Q115-STRM、MQ的媒体库、自定义）
        in: query
        name: app_id_name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建账号
      tags:
      - 账号管理
  /account/delete:
    delete:
      consumes:
      - application/json
      description: 删除指定ID的开放平台账号
      parameters:
      - description: 账号ID
        in: query
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除账号
      tags:
      - 账号管理
  /account/list:
    get:
      consumes:
      - application/json
      description: 获取所有已配置的开放平台账号（如115、OpenList等）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取账号列表
      tags:
      - 账号管理
  /account/openlist:
    post:
      consumes:
      - application/json
      description: 创建新的OpenList账号或更新现有账号的凭证
      parameters:
      - description: 账号ID（指定则为更新操作）
        in: query
        name: id
        type: integer
      - description: OpenList服务器地址
        in: query
        name: base_url
        required: true
        type: string
      - description: 用户名
        in: query
        name: username
        required: true
        type: string
      - description: 密码
        in: query
        name: password
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建/更新OpenList账号
      tags:
      - 账号管理
  /api-key/create:
    post:
      consumes:
      - application/json
      description: 为当前登录用户创建新的API密钥，仅此一次返回完整密钥
      parameters:
      - description: API密钥名称
        in: body
        name: name
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建API密钥
      tags:
      - API管理
  /api-key/delete/{id}:
    delete:
      consumes:
      - application/json
      description: 删除指定ID的API密钥（仅能删除自己的）
      parameters:
      - description: API密钥ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除API密钥
      tags:
      - API管理
  /api-key/list:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的所有API密钥（不包含完整密钥）
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取API密钥列表
      tags:
      - API管理
  /api-key/status/{id}:
    put:
      consumes:
      - application/json
      description: 更新指定API密钥的启用/禁用状态
      parameters:
      - description: API密钥ID
        in: path
        name: id
        required: true
        type: integer
      - description: 是否启用
        in: body
        name: is_active
        required: true
        schema:
          type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启用/禁用API密钥
      tags:
      - API管理
  /api/login:
    post:
      consumes:
      - application/json
      description: 用户登录并返回JWT Token
      parameters:
      - description: 用户名
        in: body
        name: username
        required: true
        schema:
          type: string
      - description: 密码
        in: body
        name: password
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      summary: 用户登录
      tags:
      - 用户管理
  /auth/115-qrcode-open:
    post:
      consumes:
      - application/json
      description: 生成115开放平台登录二维码并异步轮询状态
      parameters:
      - description: 账号ID
        in: body
        name: account_id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取115登录二维码
      tags:
      - 115开放平台
  /auth/115-qrcode-status:
    post:
      consumes:
      - application/json
      description: 查询指定二维码UID的扫码进度
      parameters:
      - description: 二维码UID
        in: body
        name: uid
        required: true
        schema:
          type: string
      - description: 账号ID
        in: body
        name: account_id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 查询115二维码扫码状态
      tags:
      - 115开放平台
  /auth/115-status:
    get:
      consumes:
      - application/json
      description: 获取指定115账号的登录状态及存储信息
      parameters:
      - description: 账号ID
        in: query
        name: account_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 查询115账号状态
      tags:
      - 115开放平台
  /database/backup-cancel:
    post:
      consumes:
      - application/json
      description: 取消正在运行中的备份任务
      parameters:
      - description: 备份任务ID
        in: body
        name: task_id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 取消备份任务
      tags:
      - 数据库管理
  /database/backup-config:
    get:
      consumes:
      - application/json
      description: 获取数据库备份的配置信息，包括是否启用、Cron表达式、存储路径等
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取备份配置
      tags:
      - 数据库管理
  /database/backup-delete:
    delete:
      consumes:
      - application/json
      description: 删除指定的备份文件
      parameters:
      - description: 备份文件名
        in: query
        name: filename
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除备份文件
      tags:
      - 数据库管理
  /database/backup-progress:
    get:
      consumes:
      - application/json
      description: 查询当前进行中的备份任务的进度信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 查询备份进度
      tags:
      - 数据库管理
  /database/backup-record:
    delete:
      consumes:
      - application/json
      description: 删除备份历史记录及对应的备份文件
      parameters:
      - description: 备份记录ID
        in: body
        name: record_id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除备份记录
      tags:
      - 数据库管理
  /database/backup-records:
    get:
      consumes:
      - application/json
      description: 分页获取数据库备份的历史记录
      parameters:
      - description: 页码（默认1）
        in: query
        name: page
        type: integer
      - description: 每页数量（默认10）
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取备份历史记录
      tags:
      - 数据库管理
  /database/backup-start:
    post:
      consumes:
      - application/json
      description: 手动启动一个数据库备份任务
      parameters:
      - description: 备份原因
        in: body
        name: reason
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动手动备份
      tags:
      - 数据库管理
  /database/backups:
    get:
      consumes:
      - application/json
      description: 获取所有已保存的备份文件及其信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 列出备份文件列表
      tags:
      - 数据库管理
  /database/restore:
    post:
      consumes:
      - multipart/form-data
      description: 上传备份文件并恢复数据库
      parameters:
      - description: 备份文件（.sql或.sql.gz）
        in: formData
        name: backup_file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 恢复数据库
      tags:
      - 数据库管理
  /database/restore-progress:
    get:
      consumes:
      - application/json
      description: 查询当前进行中的数据库恢复任务的进度信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 查询恢复进度
      tags:
      - 数据库管理
  /download/queue:
    get:
      consumes:
      - application/json
      description: 按状态分页获取下载队列任务列表
      parameters:
      - description: 任务状态
        in: query
        name: status
        type: string
      - description: 页码，默认1
        in: query
        name: page
        type: integer
      - description: 每页数量，默认100
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取下载队列
      tags:
      - 队列管理
  /download/queue/clear-pending:
    post:
      consumes:
      - application/json
      description: 清除下载队列中所有未开始的任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 清空待下载任务
      tags:
      - 队列管理
  /download/queue/clear-success-failed:
    post:
      consumes:
      - application/json
      description: 删除下载队列中已成功和失败的任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 清空已完成/失败的下载任务
      tags:
      - 队列管理
  /download/queue/start:
    post:
      consumes:
      - application/json
      description: 启动或恢复下载队列执行
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动下载队列
      tags:
      - 队列管理
  /download/queue/status:
    get:
      consumes:
      - application/json
      description: 获取下载队列当前运行状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 查询下载队列状态
      tags:
      - 队列管理
  /download/queue/stop:
    post:
      consumes:
      - application/json
      description: 停止下载队列执行
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 停止下载队列
      tags:
      - 队列管理
  /emby/config:
    get:
      consumes:
      - application/json
      description: 获取Emby媒体服务器的配置信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Emby配置
      tags:
      - Emby管理
    put:
      consumes:
      - application/json
      description: 更新Emby媒体服务器的配置信息
      parameters:
      - description: Emby服务器地址
        in: body
        name: emby_url
        schema:
          type: string
      - description: Emby API密钥
        in: body
        name: emby_api_key
        schema:
          type: string
      - description: 是否启用网盘删除
        in: body
        name: enable_delete_netdisk
        schema:
          type: integer
      - description: 是否启用库刷新
        in: body
        name: enable_refresh_library
        schema:
          type: integer
      - description: 是否启用媒体通知
        in: body
        name: enable_media_notification
        schema:
          type: integer
      - description: 是否启用提取媒体信息
        in: body
        name: enable_extract_media_info
        schema:
          type: integer
      - description: 是否启用Webhook鉴权
        in: body
        name: enable_auth
        schema:
          type: integer
      - description: 是否启用同步
        in: body
        name: sync_enabled
        schema:
          type: integer
      - description: 同步Cron表达式
        in: body
        name: sync_cron
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新Emby配置
      tags:
      - Emby管理
  /emby/sync-start:
    post:
      consumes:
      - application/json
      description: 手动触发Emby媒体库同步任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动Emby同步
      tags:
      - Emby管理
  /emby/sync-status:
    get:
      consumes:
      - application/json
      description: 获取Emby媒体库同步的当前状态和信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Emby同步状态
      tags:
      - Emby管理
  /emby/webhook:
    post:
      consumes:
      - application/json
      description: 接收Emby的事件回调（library.new）并触发通知/元数据提取
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      summary: Emby Webhook
      tags:
      - Emby管理
  /openlist/url:
    get:
      consumes:
      - application/json
      description: 根据路径查询OpenList文件直链并302重定向
      parameters:
      - description: 账号ID
        in: query
        name: account_id
        required: true
        type: integer
      - description: 文件路径
        in: query
        name: path
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
        "302":
          description: 重定向到文件直链
          schema:
            type: string
      summary: 获取OpenList文件直链
      tags:
      - OpenList
  /path/list:
    get:
      consumes:
      - application/json
      description: 按同步源类型获取本地、OpenList或115的目录列表
      parameters:
      - description: 父目录ID，仅115使用
        in: query
        name: parent_id
        type: string
      - description: 父目录路径，本地或OpenList使用
        in: query
        name: parent_path
        type: string
      - description: 同步源类型，0-本地 1-115 2-OpenList
        in: query
        name: source_type
        required: true
        type: integer
      - description: 账号ID，115或OpenList必填
        in: query
        name: account_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取目录列表
      tags:
      - 路径管理
  /scrape/ai-settings:
    get:
      consumes:
      - application/json
      description: 获取当前的AI识别模型配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取AI识别设置
      tags:
      - 刮削管理
    post:
      consumes:
      - application/json
      description: 保存或更新AI识别模型的配置
      parameters:
      - description: 是否启用AI识别
        in: body
        name: enable_ai
        schema:
          type: string
      - description: AI API Key
        in: body
        name: ai_api_key
        schema:
          type: string
      - description: AI服务器地址
        in: body
        name: ai_base_url
        schema:
          type: string
      - description: AI模型名称
        in: body
        name: ai_model_name
        schema:
          type: string
      - description: AI超时时间
        in: body
        name: ai_timeout
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 保存AI识别设置
      tags:
      - 刮削管理
  /scrape/ai-test:
    post:
      consumes:
      - application/json
      description: 测试指定的AI模型配置是否有效
      parameters:
      - description: AI API Key
        in: body
        name: ai_api_key
        required: true
        schema:
          type: string
      - description: AI服务器地址
        in: body
        name: ai_base_url
        required: true
        schema:
          type: string
      - description: AI模型名称
        in: body
        name: ai_model_name
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 测试AI识别连接
      tags:
      - 刮削管理
  /scrape/countries:
    get:
      consumes:
      - application/json
      description: 获取所有支持的国家列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取国家列表
      tags:
      - 刮削管理
  /scrape/finish:
    post:
      consumes:
      - application/json
      description: 完成整理中的记录，不继续整理
      parameters:
      - description: 记录ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 标记记录为已整理
      tags:
      - 刮削管理
  /scrape/language:
    get:
      consumes:
      - application/json
      description: 获取所有支持的语言列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取语言列表
      tags:
      - 刮削管理
  /scrape/movie-categories:
    get:
      consumes:
      - application/json
      description: 获取已配置的电影分类列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取电影分类列表
      tags:
      - 刮削管理
    post:
      consumes:
      - application/json
      description: 创建或更新电影分类配置
      parameters:
      - description: 分类ID，不填为新增
        in: body
        name: id
        schema:
          type: integer
      - description: 分类名称
        in: body
        name: name
        required: true
        schema:
          type: string
      - description: 语言代码数组
        in: body
        name: language_array
        required: true
        schema:
          items:
            type: string
          type: array
      - description: 分类ID数组
        in: body
        name: genre_id_array
        required: true
        schema:
          items:
            type: integer
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 保存电影分类
      tags:
      - 刮削管理
  /scrape/movie-categories/:id:
    delete:
      consumes:
      - application/json
      description: 删除指定的电影分类
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除电影分类
      tags:
      - 刮削管理
  /scrape/movie-genre:
    get:
      consumes:
      - application/json
      description: 获取TMDB电影分类列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取电影分类
      tags:
      - 刮削管理
  /scrape/pathes:
    get:
      consumes:
      - application/json
      description: 获取所有配置的刮削路径列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取刮削路径列表
      tags:
      - 刮削管理
    post:
      consumes:
      - application/json
      description: 创建或更新刮削路径配置
      parameters:
      - description: 路径ID，不填为新增
        in: body
        name: id
        schema:
          type: integer
      - description: 来源类型
        in: body
        name: source_type
        required: true
        schema:
          type: integer
      - description: 来源路径
        in: body
        name: source_path
        required: true
        schema:
          type: string
      - description: 目标路径
        in: body
        name: dest_path
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 保存刮削路径
      tags:
      - 刮削管理
  /scrape/pathes/:id:
    delete:
      consumes:
      - application/json
      description: 删除指定的刮削路径
      parameters:
      - description: 路径ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除刮削路径
      tags:
      - 刮削管理
    get:
      consumes:
      - application/json
      description: 根据ID获取指定刮削路径的详细配置
      parameters:
      - description: 刮削路径ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取刮削路径详情
      tags:
      - 刮削管理
  /scrape/pathes/start:
    post:
      consumes:
      - application/json
      description: 启动指定刮削路径的扫描任务
      parameters:
      - description: 路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动刮削任务
      tags:
      - 刮削管理
  /scrape/pathes/stop:
    post:
      consumes:
      - application/json
      description: 停止指定刮削路径的正运行刮削任务
      parameters:
      - description: 路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 停止刮削任务
      tags:
      - 刮削管理
  /scrape/pathes/toggle-cron:
    post:
      consumes:
      - application/json
      description: 开启或关闭刮削路径的定时戮削任务
      parameters:
      - description: 路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 切换定时刮削
      tags:
      - 刮削管理
  /scrape/re-scrape:
    post:
      consumes:
      - application/json
      description: 重新刮削指定记录，使用新提供的名称和年份
      parameters:
      - description: 记录ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      - description: 新名称
        in: body
        name: name
        required: true
        schema:
          type: string
      - description: 新年份
        in: body
        name: year
        required: true
        schema:
          type: integer
      - description: TMDBid
        in: body
        name: tmdb_id
        schema:
          type: integer
      - description: 季数
        in: body
        name: season
        schema:
          type: integer
      - description: 集数
        in: body
        name: episode
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 重新刮削
      tags:
      - 刮削管理
  /scrape/records:
    delete:
      consumes:
      - application/json
      description: 删除选中的刮削记录
      parameters:
      - description: 记录ID，用逗号分隔
        in: query
        name: ids
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除刮削记录
      tags:
      - 刮削管理
    get:
      consumes:
      - application/json
      description: 分页获取刮削任务记录，支持筛选
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: pageSize
        type: integer
      - description: 媒体类型（movie/tvshow）
        in: query
        name: type
        type: string
      - description: 记录状态
        in: query
        name: status
        type: string
      - description: 流屛名称
        in: query
        name: name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取刮削记录
      tags:
      - 刮削管理
  /scrape/records/export:
    get:
      consumes:
      - application/json
      description: 将选中的刮削记录导出json文件
      parameters:
      - description: 记录ID，用逗号分隔
        in: query
        name: ids
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 导出刮削记录
      tags:
      - 刮削管理
  /scrape/rename-failed:
    post:
      consumes:
      - application/json
      description: 将选中的刮削记录标记为待整理
      parameters:
      - description: 记录ID，用逗号分隔
        in: query
        name: ids
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 标记为待整理
      tags:
      - 刮削管理
  /scrape/tmdb:
    get:
      consumes:
      - application/json
      description: 获取当前的TMDB API配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取TMDB设置
      tags:
      - 刮削管理
    post:
      consumes:
      - application/json
      description: 保存或更新TMDB API配置
      parameters:
      - description: TMDB API Key
        in: body
        name: tmdb_api_key
        schema:
          type: string
      - description: TMDB Access Token
        in: body
        name: tmdb_access_token
        schema:
          type: string
      - description: TMDB服务器地址
        in: body
        name: tmdb_url
        schema:
          type: string
      - description: TMDB图片服务器地址
        in: body
        name: tmdb_image_url
        schema:
          type: string
      - description: TMDB默认语言
        in: body
        name: tmdb_language
        schema:
          type: string
      - description: TMDB图片语言
        in: body
        name: tmdb_image_language
        schema:
          type: string
      - description: 是否启用代理
        in: body
        name: tmdb_enable_proxy
        schema:
          type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 保存TMDB设置
      tags:
      - 刮削管理
  /scrape/tmdb-test:
    post:
      consumes:
      - application/json
      description: 测试指定的TMDB配置是否有效
      parameters:
      - description: TMDB API Key
        in: body
        name: tmdb_api_key
        schema:
          type: string
      - description: TMDB Access Token
        in: body
        name: tmdb_access_token
        schema:
          type: string
      - description: TMDB服务器地址
        in: body
        name: tmdb_url
        schema:
          type: string
      - description: TMDB图片服务器地址
        in: body
        name: tmdb_image_url
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 测试TMDB连接
      tags:
      - 刮削管理
  /scrape/tmp-image:
    get:
      consumes:
      - application/json
      description: 返回刮削临时文件中的图片内容
      parameters:
      - description: 图片路径
        in: query
        name: path
        required: true
        type: string
      - description: 媒体类型
        in: query
        name: type
        required: true
        type: string
      produces:
      - image/jpeg
      responses:
        "200":
          description: OK
          schema:
            type: object
      summary: 获取临时图片
      tags:
      - 刮削管理
  /scrape/truncate-all:
    post:
      consumes:
      - application/json
      description: 清除数据库中所有的刮削记录
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 清空所有记录
      tags:
      - 刮削管理
  /scrape/tvshow-categories:
    get:
      consumes:
      - application/json
      description: 获取已配置的电视剧分类列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取电视剧分类列表
      tags:
      - 刮削管理
    post:
      consumes:
      - application/json
      description: 创建或更新电视剧分类配置
      parameters:
      - description: 分类ID，不填为新增
        in: body
        name: id
        schema:
          type: integer
      - description: 分类名称
        in: body
        name: name
        required: true
        schema:
          type: string
      - description: 国家代码数组
        in: body
        name: country_array
        required: true
        schema:
          items:
            type: string
          type: array
      - description: 分类ID数组
        in: body
        name: genre_id_array
        required: true
        schema:
          items:
            type: integer
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 保存电视剧分类
      tags:
      - 刮削管理
  /scrape/tvshow-categories/:id:
    delete:
      consumes:
      - application/json
      description: 删除指定的电视剧分类
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除电视剧分类
      tags:
      - 刮削管理
  /scrape/tvshow-genre:
    get:
      consumes:
      - application/json
      description: 获取TMDB电视剧分类列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取电视剧分类
      tags:
      - 刮削管理
  /setting/cron:
    get:
      consumes:
      - application/json
      description: 计算Cron表达式的下5次执行时间
      parameters:
      - description: Cron表达式
        in: query
        name: cron
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Cron执行时间
      tags:
      - 系统设置
  /setting/emby/parse:
    post:
      consumes:
      - application/json
      description: 手动触发Emby媒体信息解析任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 解析Emby媒体信息
      tags:
      - 系统设置
  /setting/http-proxy:
    get:
      consumes:
      - application/json
      - application/json
      description: |-
        获取当前生效的HTTP代理配置
        获取当前系统配置的HTTP代理
      produces:
      - application/json
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取HTTP代理
      tags:
      - 系统设置
      - 系统设置
    post:
      consumes:
      - application/json
      description: 更新系统使用的HTTP代理配置
      parameters:
      - description: HTTP代理地址
        in: body
        name: http_proxy
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新HTTP代理
      tags:
      - 系统设置
  /setting/notification/channels:
    get:
      consumes:
      - application/json
      description: 获取已配置的通知渠道列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取通知渠道列表
      tags:
      - 通知管理
  /setting/notification/channels/{id}:
    delete:
      consumes:
      - application/json
      description: 删除渠道及其配置与规则
      parameters:
      - description: 渠道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除通知渠道
      tags:
      - 通知管理
  /setting/notification/channels/bark:
    post:
      consumes:
      - application/json
      description: 创建Bark通知渠道并保存配置
      parameters:
      - description: 渠道名称
        in: body
        name: channel_name
        required: true
        schema:
          type: string
      - description: 设备Key
        in: body
        name: device_key
        required: true
        schema:
          type: string
      - description: 服务器地址
        in: body
        name: server_url
        schema:
          type: string
      - description: 提示音
        in: body
        name: sound
        schema:
          type: string
      - description: 图标URL
        in: body
        name: icon
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建Bark渠道
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 更新Bark渠道名称与配置
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 渠道名称
        in: body
        name: channel_name
        schema:
          type: string
      - description: 设备Key
        in: body
        name: device_key
        schema:
          type: string
      - description: 服务器地址
        in: body
        name: server_url
        schema:
          type: string
      - description: 提示音
        in: body
        name: sound
        schema:
          type: string
      - description: 图标URL
        in: body
        name: icon
        schema:
          type: string
      - description: 描述
        in: body
        name: description
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新Bark渠道
      tags:
      - 通知管理
  /setting/notification/channels/bark/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取Bark渠道及配置
      parameters:
      - description: 渠道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Bark渠道
      tags:
      - 通知管理
  /setting/notification/channels/meow:
    post:
      consumes:
      - application/json
      description: 创建MeoW通知渠道并保存配置
      parameters:
      - description: 渠道名称
        in: body
        name: channel_name
        required: true
        schema:
          type: string
      - description: 昵称
        in: body
        name: nickname
        required: true
        schema:
          type: string
      - description: 接口地址
        in: body
        name: endpoint
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建MeoW渠道
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 更新MeoW渠道名称与配置
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 渠道名称
        in: body
        name: channel_name
        schema:
          type: string
      - description: 昵称
        in: body
        name: nickname
        schema:
          type: string
      - description: 接口地址
        in: body
        name: endpoint
        schema:
          type: string
      - description: 描述
        in: body
        name: description
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新MeoW渠道
      tags:
      - 通知管理
  /setting/notification/channels/meow/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取MeoW渠道及配置
      parameters:
      - description: 渠道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取MeoW渠道
      tags:
      - 通知管理
  /setting/notification/channels/serverchan:
    post:
      consumes:
      - application/json
      description: 创建Server酱通知渠道并保存配置
      parameters:
      - description: 渠道名称
        in: body
        name: channel_name
        required: true
        schema:
          type: string
      - description: SCKEY
        in: body
        name: sc_key
        required: true
        schema:
          type: string
      - description: 接口地址
        in: body
        name: endpoint
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建Server酱渠道
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 更新Server酱渠道名称与配置
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 渠道名称
        in: body
        name: channel_name
        schema:
          type: string
      - description: SCKEY
        in: body
        name: sc_key
        schema:
          type: string
      - description: 接口地址
        in: body
        name: endpoint
        schema:
          type: string
      - description: 描述
        in: body
        name: description
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新Server酱渠道
      tags:
      - 通知管理
  /setting/notification/channels/serverchan/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取Server酱渠道及配置
      parameters:
      - description: 渠道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Server酱渠道
      tags:
      - 通知管理
  /setting/notification/channels/status:
    post:
      consumes:
      - application/json
      description: 启用或禁用指定通知渠道
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 是否启用
        in: body
        name: is_enabled
        schema:
          type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新渠道启用状态
      tags:
      - 通知管理
  /setting/notification/channels/telegram:
    post:
      consumes:
      - application/json
      description: 创建Telegram通知渠道并保存配置
      parameters:
      - description: 渠道名称
        in: body
        name: channel_name
        required: true
        schema:
          type: string
      - description: 机器人Token
        in: body
        name: bot_token
        required: true
        schema:
          type: string
      - description: 聊天ID
        in: body
        name: chat_id
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建Telegram渠道
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 更新Telegram渠道名称与配置
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 渠道名称
        in: body
        name: channel_name
        schema:
          type: string
      - description: 机器人Token
        in: body
        name: bot_token
        schema:
          type: string
      - description: 聊天ID
        in: body
        name: chat_id
        schema:
          type: string
      - description: 描述
        in: body
        name: description
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新Telegram渠道
      tags:
      - 通知管理
  /setting/notification/channels/telegram/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取Telegram渠道及配置
      parameters:
      - description: 渠道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Telegram渠道
      tags:
      - 通知管理
  /setting/notification/channels/test:
    post:
      consumes:
      - application/json
      description: 发送测试消息验证通知渠道可用性
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 测试通知渠道
      tags:
      - 通知管理
  /setting/notification/channels/webhook:
    post:
      consumes:
      - application/json
      description: 创建自定义Webhook通知渠道并保存配置
      parameters:
      - description: 渠道名称
        in: body
        name: channel_name
        required: true
        schema:
          type: string
      - description: Webhook地址
        in: body
        name: endpoint
        required: true
        schema:
          type: string
      - description: 请求方法(GET/POST)
        in: body
        name: method
        required: true
        schema:
          type: string
      - description: 模板内容
        in: body
        name: template
        required: true
        schema:
          type: string
      - description: POST格式(json|form|text)
        in: body
        name: format
        schema:
          type: string
      - description: GET参数名，默认q
        in: body
        name: query_param
        schema:
          type: string
      - description: 鉴权类型 none|bearer|basic|header|query
        in: body
        name: auth_type
        schema:
          type: string
      - description: 鉴权Token
        in: body
        name: auth_token
        schema:
          type: string
      - description: Basic用户名
        in: body
        name: auth_user
        schema:
          type: string
      - description: Basic密码
        in: body
        name: auth_pass
        schema:
          type: string
      - description: Header键
        in: body
        name: auth_header_key
        schema:
          type: string
      - description: Query键
        in: body
        name: auth_query_key
        schema:
          type: string
      - description: 附加请求头
        in: body
        name: headers
        schema:
          type: object
      - description: 描述
        in: body
        name: description
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 创建Webhook渠道
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 更新自定义Webhook渠道的基础信息和模板
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 渠道名称
        in: body
        name: channel_name
        schema:
          type: string
      - description: Webhook地址
        in: body
        name: endpoint
        schema:
          type: string
      - description: 请求方法(GET/POST)
        in: body
        name: method
        schema:
          type: string
      - description: 模板内容
        in: body
        name: template
        schema:
          type: string
      - description: POST格式(json|form|text)
        in: body
        name: format
        schema:
          type: string
      - description: GET参数名
        in: body
        name: query_param
        schema:
          type: string
      - description: 鉴权类型
        in: body
        name: auth_type
        schema:
          type: string
      - description: 鉴权Token
        in: body
        name: auth_token
        schema:
          type: string
      - description: Basic用户名
        in: body
        name: auth_user
        schema:
          type: string
      - description: Basic密码
        in: body
        name: auth_pass
        schema:
          type: string
      - description: Header键
        in: body
        name: auth_header_key
        schema:
          type: string
      - description: Query键
        in: body
        name: auth_query_key
        schema:
          type: string
      - description: 附加请求头
        in: body
        name: headers
        schema:
          type: object
      - description: 描述
        in: body
        name: description
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新Webhook渠道
      tags:
      - 通知管理
  /setting/notification/channels/webhook/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取Webhook渠道及配置
      parameters:
      - description: 渠道ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Webhook渠道
      tags:
      - 通知管理
  /setting/notification/rules:
    get:
      consumes:
      - application/json
      description: 获取指定渠道的通知规则列表
      parameters:
      - description: 渠道ID
        in: query
        name: channel_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取通知规则
      tags:
      - 通知管理
    put:
      consumes:
      - application/json
      description: 创建或更新渠道的事件通知规则
      parameters:
      - description: 渠道ID
        in: body
        name: channel_id
        required: true
        schema:
          type: integer
      - description: 事件类型
        in: body
        name: event_type
        required: true
        schema:
          type: string
      - description: 是否启用
        in: body
        name: is_enabled
        schema:
          type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新通知规则
      tags:
      - 通知管理
  /setting/strm-config:
    get:
      consumes:
      - application/json
      description: 获取STRM同步相关的配置项
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取STRM配置
      tags:
      - 系统设置
    post:
      consumes:
      - application/json
      description: 更新STRM同步相关的配置项（包括URL、Cron、扩展名等）
      parameters:
      - description: STRM基础URL
        in: body
        name: strm_base_url
        required: true
        schema:
          type: string
      - description: Cron表达式
        in: body
        name: cron
        required: true
        schema:
          type: string
      - description: 元数据扩展名
        in: body
        name: meta_ext
        required: true
        schema:
          items:
            type: string
          type: array
      - description: 视频扩展名
        in: body
        name: video_ext
        required: true
        schema:
          items:
            type: string
          type: array
      - description: 最小视频大小（MB）
        in: body
        name: min_video_size
        schema:
          type: integer
      - description: 是否上传元数据，1上传 0不上传
        in: body
        name: upload_meta
        schema:
          type: integer
      - description: 是否删除空目录，1删除 0不删除
        in: body
        name: delete_dir
        schema:
          type: integer
      - description: 是否启用本地代理，1启用 0禁用
        in: body
        name: local_proxy
        schema:
          type: integer
      - description: 排除的文件名
        in: body
        name: exclude_name
        schema:
          items:
            type: string
          type: array
      - description: 是否下载元数据，1下载 0不下载
        in: body
        name: download_meta
        schema:
          type: integer
      - description: 是否添加路径，1添加 2不添加
        in: body
        name: add_path
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新STRM配置
      tags:
      - 系统设置
  /setting/telegram:
    get:
      consumes:
      - application/json
      description: 获取当前的Telegram Bot通知配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取Telegram配置
      tags:
      - 系统设置
    post:
      consumes:
      - application/json
      description: 启用或配置Telegram通知Bot
      parameters:
      - description: 是否启用，1启用 0禁用
        in: body
        name: enabled
        required: true
        schema:
          type: integer
      - description: Telegram Bot Token
        in: body
        name: token
        schema:
          type: string
      - description: Telegram Chat ID
        in: body
        name: chat_id
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新Telegram配置
      tags:
      - 系统设置
  /setting/test-http-proxy:
    post:
      consumes:
      - application/json
      description: 测试指定HTTP代理的连接有效性
      parameters:
      - description: HTTP代理地址
        in: body
        name: http_proxy
        required: true
        schema:
          type: string
      - description: 是否返回详细测试结果，1返回 0不返回
        in: body
        name: detailed
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 测试HTTP代理
      tags:
      - 系统设置
  /setting/threads:
    get:
      consumes:
      - application/json
      description: 获取当前下载和文件详情查询的线程数配置
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取线程数配置
      tags:
      - 系统设置
    post:
      consumes:
      - application/json
      description: 更新下载和文件详情查询的线程数
      parameters:
      - description: 下载线程数
        in: body
        name: download_threads
        required: true
        schema:
          type: integer
      - description: 文件详情查询线程数
        in: body
        name: file_detail_threads
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新线程数配置
      tags:
      - 系统设置
  /sync/delete-records:
    post:
      consumes:
      - application/json
      description: 批量删除已完成或失败的同步记录
      parameters:
      - description: 同步记录ID列表
        in: body
        name: ids
        required: true
        schema:
          items:
            type: integer
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除同步记录
      tags:
      - 同步管理
  /sync/path-add:
    post:
      consumes:
      - application/json
      description: 创建新的同步路径配置
      parameters:
      - description: 来源类型
        in: body
        name: source_type
        required: true
        schema:
          type: integer
      - description: 网盘账号ID
        in: body
        name: account_id
        schema:
          type: integer
      - description: 来源路径ID或本地路径
        in: body
        name: base_cid
        required: true
        schema:
          type: string
      - description: 本地路径
        in: body
        name: local_path
        required: true
        schema:
          type: string
      - description: 同步源路径
        in: body
        name: remote_path
        required: true
        schema:
          type: string
      - description: 是否启用定时任务
        in: body
        name: enable_cron
        schema:
          type: boolean
      - description: 是否自定义配置
        in: body
        name: custom_config
        schema:
          type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 添加同步路径
      tags:
      - 同步管理
  /sync/path-delete:
    post:
      consumes:
      - application/json
      description: 根据ID删除指定的同步路径
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 删除同步路径
      tags:
      - 同步管理
  /sync/path-list:
    get:
      consumes:
      - application/json
      description: 分页获取所有配置的同步路径
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取同步路径列表
      tags:
      - 同步管理
  /sync/path-update:
    post:
      consumes:
      - application/json
      description: 更新已有的同步路径配置
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      - description: 来源类型
        in: body
        name: source_type
        required: true
        schema:
          type: integer
      - description: 网盘账号ID
        in: body
        name: account_id
        schema:
          type: integer
      - description: 来源路径ID或本地路径
        in: body
        name: base_cid
        required: true
        schema:
          type: string
      - description: 本地路径
        in: body
        name: local_path
        required: true
        schema:
          type: string
      - description: 同步源路径
        in: body
        name: remote_path
        required: true
        schema:
          type: string
      - description: 是否启用定时任务
        in: body
        name: enable_cron
        schema:
          type: boolean
      - description: 是否自定义配置
        in: body
        name: custom_config
        schema:
          type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新同步路径
      tags:
      - 同步管理
  /sync/path/:id:
    get:
      consumes:
      - application/json
      description: 根据ID获取指定同步路径的详细配置
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取同步路径详情
      tags:
      - 同步管理
  /sync/path/full-start:
    post:
      consumes:
      - application/json
      description: 删除本地缓存数据并触发115的全量同步
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动115全量同步
      tags:
      - 同步管理
  /sync/path/start:
    post:
      consumes:
      - application/json
      description: 启动指定同步目录的同步任务
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动同步路径
      tags:
      - 同步管理
  /sync/path/stop:
    post:
      consumes:
      - application/json
      description: 停止指定同步目录的同步任务
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 停止同步路径
      tags:
      - 同步管理
  /sync/path/toggle-cron:
    post:
      consumes:
      - application/json
      description: 开启或关闭同步目录的定时同步任务
      parameters:
      - description: 同步路径ID
        in: body
        name: id
        required: true
        schema:
          type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 切换定时同步
      tags:
      - 同步管理
  /sync/records:
    get:
      consumes:
      - application/json
      description: 分页获取同步任务记录列表
      parameters:
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取同步记录
      tags:
      - 同步管理
  /sync/start:
    post:
      consumes:
      - application/json
      description: 启动全局同步任务并添加到队列
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动同步任务
      tags:
      - 同步管理
  /sync/task:
    get:
      consumes:
      - application/json
      description: 根据ID获取指定同步任务的详细信息
      parameters:
      - description: 同步任务ID
        in: query
        name: sync_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取同步任务详情
      tags:
      - 同步管理
  /telegram/test:
    post:
      consumes:
      - application/json
      description: 测试指定Telegram Bot的连接有效性
      parameters:
      - description: Telegram Bot Token
        in: body
        name: token
        required: true
        schema:
          type: string
      - description: Telegram Chat ID
        in: body
        name: chat_id
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 测试Telegram连接
      tags:
      - 系统设置
  /update/cancel:
    post:
      consumes:
      - application/json
      description: 取消正在进行的更新任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 取消更新
      tags:
      - 更新管理
  /update/last:
    get:
      consumes:
      - application/json
      description: 获取GitHub上最新的5个稳定版本
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取最新版本
      tags:
      - 更新管理
  /update/progress:
    get:
      consumes:
      - application/json
      description: 查询当前更新任务的下载和安装进度
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取更新进度
      tags:
      - 更新管理
  /update/to-version:
    post:
      consumes:
      - application/json
      description: 下载并安装指定版本的更新包
      parameters:
      - description: 版本号
        in: body
        name: version
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 更新到指定版本
      tags:
      - 更新管理
  /upload/queue:
    get:
      consumes:
      - application/json
      description: 按状态分页获取上传队列任务列表
      parameters:
      - description: 任务状态
        in: query
        name: status
        type: string
      - description: 页码，默认1
        in: query
        name: page
        type: integer
      - description: 每页数量，默认100
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取上传队列
      tags:
      - 队列管理
  /upload/queue/clear-pending:
    post:
      consumes:
      - application/json
      description: 清除上传队列中所有未开始的任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 清空待上传任务
      tags:
      - 队列管理
  /upload/queue/clear-success-failed:
    post:
      consumes:
      - application/json
      description: 删除上传队列中已成功和失败的任务
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 清空已完成/失败的上传任务
      tags:
      - 队列管理
  /upload/queue/start:
    post:
      consumes:
      - application/json
      description: 启动或恢复上传队列执行
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 启动上传队列
      tags:
      - 队列管理
  /upload/queue/status:
    get:
      consumes:
      - application/json
      description: 获取上传队列当前运行状态
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 查询上传队列状态
      tags:
      - 队列管理
  /upload/queue/stop:
    post:
      consumes:
      - application/json
      description: 停止上传队列执行
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 停止上传队列
      tags:
      - 队列管理
  /user/change:
    post:
      consumes:
      - application/json
      description: 修改当前登录用户的用户名和密码
      parameters:
      - description: 新用户名
        in: body
        name: username
        required: true
        schema:
          type: string
      - description: 新密码
        in: body
        name: new_password
        required: true
        schema:
          type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 修改密码
      tags:
      - 用户管理
  /user/info:
    get:
      consumes:
      - application/json
      description: 获取当前登录用户的ID和用户名
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
      security:
      - JwtAuth: []
      - ApiKeyAuth: []
      summary: 获取用户信息
      tags:
      - 用户管理
securityDefinitions:
  ApiKeyAuth:
    in: query
    name: api_key
    type: apiKey
  JwtAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
